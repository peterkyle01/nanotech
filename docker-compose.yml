version: '3.9'

services:
  db:
    image: postgres
    ports:
      - '5432:5432'
    environment:
      POSTGRES_USER: peterkyle01
      POSTGRES_PASSWORD: super-secret
      POSTGRES_DB: 'nanotech'
    volumes:
      - db_data:/postgres_data

  azurite:
    image: mcr.microsoft.com/azure-storage/azurite
    command: 'azurite-blob --blobHost 0.0.0.0'
    ports:
      - '10000:10000'
    environment:
      AZURE_STORAGE_CONNECTION_STRING: 'DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://127.0.0.1:10000/devstoreaccount1;'
      AZURE_STORAGE_CONTAINER_NAME: 'nanotech-container'
      AZURE_STORAGE_ALLOW_CONTAINER_CREATE: 'true'
      AZURE_STORAGE_ACCOUNT_BASEURL: 'http://127.0.0.1:10000/devstoreaccount1'
    volumes:
      - azurite_data:/azurite_data

volumes:
  db_data:
  azurite_data:
